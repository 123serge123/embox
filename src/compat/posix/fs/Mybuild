package embox.compat.posix.fs

@DefaultImpl(all_old)
abstract module all {
}

@DefaultImpl(file_old)
abstract module file {
}

@DefaultImpl(fsop_old)
abstract module fsop {
}

static module lseek {
	source "lseek.c"

	depends embox.kernel.task.idesc
	depends embox.kernel.task.resource.errno
}

module pread {
	source "pread.c"

	@NoRuntime depends lseek
	@NoRuntime depends embox.compat.posix.index_descriptor
}

module pwrite {
	source "pwrite.c"

	@NoRuntime depends lseek
	@NoRuntime depends embox.compat.posix.index_descriptor
}

module fsync {
	source "fsync.c"
	depends embox.kernel.task.idesc
}

module creat {
	source "creat.c"
}

static module stat {
	source "stat.c"

	@NoRuntime depends embox.compat.posix.index_descriptor
}

@NoCode
module file_ops {
	depends ftruncate, fsync
	depends pread, pwrite
}

static module getcwd {
	source "getcwd.c"

	depends embox.compat.posix.util.environ
	depends embox.compat.libc.str
}

static module umask {
	source "umask.c"

	depends embox.kernel.task.resource.umask
}

static module libgen {
	source "dirname.c"
	source "basename.c"

	@NoRuntime depends third_party.lib.cwalk
}

static module chdir {
	source "chdir.c"

	depends embox.compat.posix.util.environ
	depends embox.compat.libc.all
}

static module truncate {
	source "truncate.c"
}

static module realpath {
	option string log_level="LOG_ERR"

	source "realpath.c"
}
